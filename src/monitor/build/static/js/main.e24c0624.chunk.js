(this.webpackJsonpmonitor=this.webpackJsonpmonitor||[]).push([[0],{137:function(e,t,n){e.exports=n(220)},142:function(e,t,n){},180:function(e,t){},216:function(e,t){},220:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),i=n(65),r=n.n(i),c=(n(142),n(82),n(112),n(125)),s=n(59),l=n(72),m=n(113),u=n(114),d=n(126),p=n(124),b=n(27),h=n(123),E=n.n(h),f=function(e){var t=e.actions,n=(e.depotsData,e.viewport,e.movesbase,e.movedData,e.routePaths,e.clickedObject,e.animatePause),o=e.animateReverse,i=e.settime,r=e.secperhour,c=e.leading,s=e.timeBegin,l=e.timeLength;return(a.createElement("div",{className:"harmovis_controller"},a.createElement("div",{className:"container"},a.createElement("ul",{className:"list-group"},a.createElement("li",null,a.createElement("span",null,"\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d1\u30cd\u30eb"),a.createElement("div",{className:"btn-group d-flex",role:"group"},n?a.createElement(b.j,{actions:t,className:"btn btn-outline-light btn-sm w-100"}):a.createElement(b.i,{actions:t,className:"btn btn-outline-light btn-sm w-100"}),o?a.createElement(b.e,{actions:t,className:"btn btn-outline-light btn-sm w-100"}):a.createElement(b.k,{actions:t,className:"btn btn-outline-light btn-sm w-100"})),a.createElement("div",{className:"btn-group d-flex",role:"group"},a.createElement(b.a,{addMinutes:-5,actions:t,className:"btn btn-outline-light btn-sm w-100"}),a.createElement(b.a,{addMinutes:-1,actions:t,className:"btn btn-outline-light btn-sm w-100"})),a.createElement("div",{className:"btn-group d-flex",role:"group"},a.createElement(b.a,{addMinutes:1,actions:t,className:"btn btn-outline-light btn-sm w-100"}),a.createElement(b.a,{addMinutes:5,actions:t,className:"btn btn-outline-light btn-sm w-100"}))),a.createElement("li",null,"\u518d\u73fe\u4e2d\u65e5\u6642\xa0",a.createElement(b.l,{settime:i})),a.createElement("li",null,a.createElement("label",{htmlFor:"ElapsedTimeRange"},"\u7d4c\u904e\u6642\u9593",a.createElement(b.d,{settime:i,timeBegin:s,timeLength:Math.floor(l),actions:t}),"\u79d2\xa0/\xa0\u5168\u4f53\xa0",Math.floor(l),"\xa0\u79d2"),a.createElement(b.c,{settime:i,timeLength:Math.floor(l),timeBegin:s,min:-c,actions:t,id:"ElapsedTimeRange",className:"form-control-range"})),a.createElement("li",null,a.createElement("label",{htmlFor:"SpeedRange"},"\u30b9\u30d4\u30fc\u30c9",a.createElement(b.n,{secperhour:r,actions:t}),"\u79d2/\u6642"),a.createElement(b.m,{secperhour:r,actions:t,id:"SpeedRange",className:"form-control-range"}))))))},g=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props;e.actions,e.depotsData,e.viewport,e.movesbase;return(o.a.createElement(N,this.props))}}]),n}(b.b),v=E()(),N=function(e){var t=e.actions,n=(e.depotsData,e.viewport),i=e.movesbase,r=e.movedData,m=e.routePaths,u=e.clickedObject,d=Object(a.useState)([]),p=Object(l.a)(d,2),h=p[0],E=p[1],g=Object(a.useState)([]),N=Object(l.a)(g,2),I=(N[0],N[1]),j=Object(a.useState)([]),L=Object(l.a)(j,2),S=(L[0],L[1]);return Object(a.useEffect)((function(){v.on("agents",(function(e){return function(e){var n=Date.now()/1e3,a=[];S((function(t){return e.forEach((function(e){var o=JSON.parse(e),i=(o.mtype,o.id),r=o.lat,l=o.lon,m=[0,200,120],u=!1;if(t.forEach((function(e){i===e.type&&(a.push(Object(s.a)(Object(s.a)({},e),{},{operation:[].concat(Object(c.a)(e.operation),[{elapsedtime:n,position:[l,r,0],color:m}])})),u=!0)})),!u){a.push({type:i,operation:[{elapsedtime:n,position:[l,r,0],color:[0,255,0]}]})}})),a})),t.updateMovesBase(a)}(e)})),v.on("areas",(function(e){return function(e){console.log("areaInfo",e);var t=[],n=O(e);I(n),n.forEach((function(e){var n=w(e.ControlArea),a=n.maxLat,o=n.maxLon,i=n.minLat,r=n.minLon;t.push({sourcePosition:[r,i,0],targetPosition:[r,a,0]}),t.push({sourcePosition:[r,a,0],targetPosition:[o,a,0]}),t.push({sourcePosition:[o,a,0],targetPosition:[o,i,0]}),t.push({sourcePosition:[o,i,0],targetPosition:[r,i,0]})})),E(t)}(e)})),console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0})),t&&(t.setViewport(Object(s.a)(Object(s.a)({},e.viewport),{},{longitude:136.9831702,latitude:35.1562909,width:window.screen.width,height:window.screen.height,zoom:16})),t.setSecPerHour(3600),t.setLeading(2),t.setTrailing(5))}),[]),o.a.createElement("div",null,o.a.createElement(f,e),o.a.createElement(b.f,{viewport:n,actions:t,mapboxApiAccessToken:"pk.eyJ1IjoicnVpaGlyYW5vIiwiYSI6ImNqdmc0bXJ0dTAzZDYzem5vMmk0ejQ0engifQ.3k045idIb4JNvawjppzqZA",layers:[new b.g({data:h,getWidth:function(e){return 10}}),new b.h({routePaths:m,movesbase:i,movedData:r,clickedObject:u,actions:t,optionVisible:!1,getRadius:function(e){return.5},iconChange:!1})]}))};var w=function(e){var t=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;return e.forEach((function(e){e.Lat>t&&(t=e.Lat),e.Lon>n&&(n=e.Lon),e.Lat<a&&(a=e.Lat),e.Lon<o&&(o=e.Lon)})),{maxLat:t,maxLon:n,minLat:a,minLon:o}},O=function(e){var t=[];return e.forEach((function(e){var n=JSON.parse(e),a={ControlArea:[],DuplicateArea:[],Name:"",Id:""};n.control_area.forEach((function(e){a.ControlArea.push({Lat:e.latitude,Lon:e.longitude})})),n.duplicate_area.forEach((function(e){a.DuplicateArea.push({Lat:e.latitude,Lon:e.longitude})})),n.id?a.Id=n.id:a.Id="",n.name?a.Name=n.name:a.Name="",t.push(a)})),t},I=Object(b.o)(g),j=n(70),L=n(44),S=(n(219),Object(L.c)(Object(b.p)()));var T=function(){return o.a.createElement(j.a,{store:S},o.a.createElement(I,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},83:function(e,t){}},[[137,1,2]]]);
//# sourceMappingURL=main.e24c0624.chunk.js.map